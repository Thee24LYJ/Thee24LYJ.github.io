<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>linux ç³»ç»Ÿè®¾ç½®å¼€æœºè‡ªå¯è„šæœ¬æ–¹å¼ | theeã®åšå®¢ ğŸ‰</title><meta name="author" content="thee"><meta name="copyright" content="thee"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="linux ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ å‚è€ƒï¼šRun a Script on Startup in Linux  ä¸€ã€crontab Linux å®šæ—¶ä»»åŠ¡ crontab å®ç°ç§’çº§å®šæ—¶ä»¥åŠ@reboot çš„ä¸€äº›é—®é¢˜ å¦‚ä½•æŸ¥çœ‹ crontab çš„æ—¥å¿—è®°å½• Running a script during booting&#x2F;startup; init.d vs cron @reboot   ä½¿ç”¨crontab">
<meta property="og:type" content="article">
<meta property="og:title" content="linux ç³»ç»Ÿè®¾ç½®å¼€æœºè‡ªå¯è„šæœ¬æ–¹å¼">
<meta property="og:url" content="http://example.com/2023/06/20/linux%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC%E6%96%B9%E5%BC%8F/index.html">
<meta property="og:site_name" content="theeã®åšå®¢ ğŸ‰">
<meta property="og:description" content="linux ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ å‚è€ƒï¼šRun a Script on Startup in Linux  ä¸€ã€crontab Linux å®šæ—¶ä»»åŠ¡ crontab å®ç°ç§’çº§å®šæ—¶ä»¥åŠ@reboot çš„ä¸€äº›é—®é¢˜ å¦‚ä½•æŸ¥çœ‹ crontab çš„æ—¥å¿—è®°å½• Running a script during booting&#x2F;startup; init.d vs cron @reboot   ä½¿ç”¨crontab">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/e0a9f20fcdf2977dadef521f02b0465004cafee6.jpg">
<meta property="article:published_time" content="2023-06-20T11:11:33.000Z">
<meta property="article:modified_time" content="2023-08-14T11:10:46.118Z">
<meta property="article:author" content="thee">
<meta property="article:tag" content="è‡ªå¯åŠ¨">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/e0a9f20fcdf2977dadef521f02b0465004cafee6.jpg"><link rel="shortcut icon" href="/assets/img/plane.png"><link rel="canonical" href="http://example.com/2023/06/20/linux%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC%E6%96%B9%E5%BC%8F/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: thee","link":"é“¾æ¥: ","source":"æ¥æº: theeã®åšå®¢ ğŸ‰","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'linux ç³»ç»Ÿè®¾ç½®å¼€æœºè‡ªå¯è„šæœ¬æ–¹å¼',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-14 19:10:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/assets/css/custom.css"><link rel="stylesheet" href="/assets/css/progress_bar.css" media="defer" onload="this.media='all'"><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/assets/img/test.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/changes/"><i class="fa-fw fas fa-calendar-alt"></i><span> æ›´æ–°è®°å½•</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/e0a9f20fcdf2977dadef521f02b0465004cafee6.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">theeã®åšå®¢ ğŸ‰</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/changes/"><i class="fa-fw fas fa-calendar-alt"></i><span> æ›´æ–°è®°å½•</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">linux ç³»ç»Ÿè®¾ç½®å¼€æœºè‡ªå¯è„šæœ¬æ–¹å¼</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-06-20T11:11:33.000Z" title="å‘è¡¨äº 2023-06-20 19:11:33">2023-06-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-08-14T11:10:46.118Z" title="æ›´æ–°äº 2023-08-14 19:10:46">2023-08-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">2.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>10åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="linux ç³»ç»Ÿè®¾ç½®å¼€æœºè‡ªå¯è„šæœ¬æ–¹å¼"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="linux-ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ"><a href="#linux-ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ" class="headerlink" title="linux ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ"></a>linux ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ</h1><blockquote>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.baeldung.com/linux/run-script-on-startup">Run a Script on Startup in Linux</a></p>
</blockquote>
<h1 id="ä¸€ã€crontab"><a href="#ä¸€ã€crontab" class="headerlink" title="ä¸€ã€crontab"></a>ä¸€ã€crontab</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15966109/6082825">Linux å®šæ—¶ä»»åŠ¡ crontab å®ç°ç§’çº§å®šæ—¶ä»¥åŠ@reboot çš„ä¸€äº›é—®é¢˜</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/doseoer/p/5663187.html">å¦‚ä½•æŸ¥çœ‹ crontab çš„æ—¥å¿—è®°å½•</a></p>
<p><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/188042/running-a-script-during-booting-startup-init-d-vs-cron-reboot">Running a script during booting/startup; init.d vs cron @reboot</a></p>
</blockquote>
<ul>
<li>ä½¿ç”¨<code>crontab -e</code>å‘½ä»¤ç¼–è¾‘ crontab æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot /bin/bash SCRIPT_PATH</span><br></pre></td></tr></table></figure>
<p>ç³»ç»Ÿé‡å¯åä¼šè‡ªåŠ¨æ‰§è¡Œè„šæœ¬</p>
<ul>
<li>æ³¨æ„ï¼š<ul>
<li>å¯èƒ½å¾—ä½¿ç”¨ root æƒé™æ‰èƒ½æ­£å¸¸è‡ªå¯åŠ¨æ‰§è¡Œ</li>
<li>å‡å¦‚è¯´æ‰§è¡Œè„šæœ¬ä¸­æœ‰é‡å®šå‘åˆ°æŸä¸ªæ–‡ä»¶æˆ–ç»ˆç«¯çš„æƒ…å†µ<ul>
<li>é‡å®šå‘åˆ°æ–‡ä»¶ï¼šå¯èƒ½å¾—éœ€è¦ç¨‹åºæ‰§è¡Œå®Œæ‰èƒ½çœ‹åˆ°é‡å®šå‘åˆ°æ–‡ä»¶çš„å†…å®¹</li>
<li>é‡å®šå‘åˆ°ç»ˆç«¯ï¼šè¿™å¾—éœ€è¦æ‰§è¡Œè„šæœ¬çš„æ—¶å€™å­˜åœ¨è¯¥ç»ˆç«¯ï¼Œå¦åˆ™å¯èƒ½ä¼šå› ä¸ºæ‰“ä¸å¼€ç»ˆç«¯è€Œå¯¼è‡´æ‰§è¡Œå¤±è´¥</li>
</ul>
</li>
</ul>
</li>
<li><p>å…³äº crontab</p>
<ul>
<li>å¯ä»¥æ‰§è¡Œä»»ä½•å‘½ä»¤æˆ–è„šæœ¬</li>
<li>ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æ·»åŠ ï¼Œä¸åªå±€é™äº root ç”¨æˆ·</li>
<li>on a Debian system with systemd: cronâ€™s @reboot is executed during <code>multi-user.target</code>. on a Debian system with SysV (not systemd), crontab(5) mention: <em>Please note that startup, as far as @reboot is concerned, is the time when the cron(8) daemon startup. In particular, it may be before some system daemons, or other facilities, were startup. This is due to the boot order sequence of the machine.</em></li>
</ul>
</li>
<li><p>crontab æ—¥å¿—è®°å½•</p>
<p>  æ–‡ä»¶ä½ç½®ï¼š<code>/var/log/cron.log</code></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">tail</span> -f /var/log/cron.log	<span class="comment"># æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šæœ‰å¯èƒ½ä¼šå‡ºç°æ²¡æœ‰è¿™ä¸ªæ—¥å¿—æ–‡ä»¶çš„æƒ…å†µï¼Œæˆ‘è¿™é‡Œå°±æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<p>  å¦ä¸€ç§æ–¹æ³•ï¼š</p>
<p>  æ–‡ä»¶ç›®å½•ä½ç½®ï¼š<code>/var/spool/mail/</code>ï¼Œå…¶ä¸­å­˜æ”¾ç€ä¸åŒç”¨æˆ·çš„ crontab æ‰§è¡Œçš„æ—¥å¿—æƒ…å†µ</p>
<p>  ä½¿ç”¨<code>tail -f /var/spool/mail/root</code> å³å¯æŸ¥çœ‹ root ç”¨æˆ·æœ€è¿‘çš„ crontab æ‰§è¡Œæƒ…å†µï¼Œå…¶ä»–ç”¨æˆ·åŒç†</p>
</li>
</ul>
<h1 id="äºŒã€rc-local"><a href="#äºŒã€rc-local" class="headerlink" title="äºŒã€rc.local"></a>äºŒã€rc.local</h1><blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kk3909/article/details/105025144">åˆ©ç”¨ rc.local å¼€æœºè‡ªå¯åŠ¨ç¨‹åº</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wucongzhou/p/12588682.html">Linux å¼€æœºå¯åŠ¨ç¨‹åº rc.local</a></p>
</li>
</ul>
</blockquote>
<ul>
<li><p>rc.local æ–‡ä»¶</p>
<blockquote>
<ul>
<li>æ–‡ä»¶ä½ç½®ï¼š<code>/etc/rc.local</code>ï¼Œåœ¨<code>/etc/rc.d/</code>ä¸‹æœ‰å®ƒçš„è½¯è¿æ¥</li>
<li>æ–‡ä»¶åŸå§‹å†…å®¹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES</span><br><span class="line">#</span><br><span class="line"># It is highly advisable to create own systemd services or udev rules</span><br><span class="line"># to run scripts during boot instead of using this file.</span><br><span class="line">#</span><br><span class="line"># In contrast to previous versions due to parallel execution during boot</span><br><span class="line"># this script will NOT be run after all other services.</span><br><span class="line">#</span><br><span class="line"># Please note that you must run &#x27;chmod +x /etc/rc.d/rc.local&#x27; to ensure</span><br><span class="line"># that this script will be executed during boot.</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ¨èæˆ‘ä»¬ä½¿ç”¨ systemd æœåŠ¡æˆ– udev è§„åˆ™è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨è¯¥æ–‡ä»¶ï¼Œè™½ç„¶ä¸æ¨èç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œä¸è¿‡å®ƒçš„ç¼ºç‚¹æ˜¯å¼•å¯¼æœŸé—´å¹¶è¡Œ</p>
</blockquote>
</li>
<li><p>é…ç½® rc.local æ–‡ä»¶</p>
<blockquote>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œrc.local æœåŠ¡åº”è¯¥æ˜¯å¼€å¯äº†çš„ï¼Œå¦‚æœæ²¡æœ‰å¼€å¯åˆ™ä½¿ç”¨<code>sudo systemctl enable rc-local</code>æ‰“å¼€è¯¥æœåŠ¡ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ–‡ä»¶åº”è¯¥ä¹Ÿå…·æœ‰æ‰§è¡Œæƒé™ï¼Œè‹¥æ²¡æœ‰åˆ™æ‰§è¡Œ<code>sudo chmod +x /etc/rc.local</code>å³å¯</p>
</blockquote>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/bin/date &gt;&gt; /tmp/date1.log	# å†™å…¥å½“å‰æ—¶é—´è‡³ date1.log</span><br><span class="line">/bin/sleep 10	# ç¡çœ  10s</span><br><span class="line">/bin/date &gt;&gt; /tmp/date2.log	# å†™å…¥å½“å‰æ—¶é—´è‡³ date2.log</span><br></pre></td></tr></table></figure>
<p>  åšå®Œä»¥ä¸Šæ­¥éª¤åï¼Œé‡å¯ç³»ç»Ÿæ—¶å°†ä¼šè‡ªåŠ¨æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ç”¨è‡ªå®šä¹‰è„šæœ¬æ›¿ä»£ä¸Šè¿°å‘½ä»¤ï¼‰</p>
</li>
<li><p>æŸ¥çœ‹è„šæœ¬æ‰§è¡Œæ—¥å¿—ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ journalctl -e -u rc-local.service</span><br><span class="line">$ sudo <span class="built_in">cat</span> /var/log/syslog | grep -i rc.local</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ³¨æ„</p>
<blockquote>
<p>rc.local è„šæœ¬åœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨æ—¶åªæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œè¿‡ç¨‹æ—¶æ²¡æœ‰ç¯å¢ƒå˜é‡ï¼Œéœ€è¦æŠŠå‘½ä»¤çš„å®Œæ•´è·¯å¾„åŠ ä¸Šæ‰èƒ½æˆåŠŸæ‰§è¡Œ</p>
<p>rc.local æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œæ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªç¨‹åºåæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªç¨‹åºï¼Œå¦‚æœæŸç¨‹åºä¸æ˜¯åå°ç¨‹åºï¼Œå°±åº”è¯¥åŠ &amp;è®©ç¨‹åºè¿è¡Œåœ¨åå°ï¼Œå¦åˆ™ rc.local ä¼šæŒ‚èµ·</p>
<p>åœ¨å¸¦æœ‰ SysVï¼ˆä¸æ˜¯ systemdï¼‰çš„ Debian ç³»ç»Ÿä¸Šï¼šrc.localï¼ˆå‡ ä¹ï¼‰æ˜¯æœ€åä¸€ä¸ªå¯åŠ¨çš„æœåŠ¡ï¼Œä½†åœ¨å¸¦æœ‰ systemd çš„ Debian ç³»ç»Ÿä¸Šï¼šé»˜è®¤æƒ…å†µä¸‹ rc.local åœ¨ network.target ä¹‹åæ‰§è¡Œï¼ˆä¸æ˜¯ network-online.target ï¼ï¼‰</p>
<p>è¯¥è„šæœ¬æ˜¯åœ¨ç³»ç»Ÿåˆå§‹åŒ–çº§åˆ«è„šæœ¬è¿è¡Œä¹‹åå†æ‰§è¡Œçš„ï¼Œå› æ­¤å¯ä»¥å®‰å…¨åœ°åœ¨é‡Œé¢æ·»åŠ æˆ‘ä»¬æƒ³åœ¨ç³»ç»Ÿå¯åŠ¨ä¹‹åæ‰§è¡Œçš„è„šæœ¬</p>
</blockquote>
</li>
</ul>
<h1 id="ä¸‰ã€init-d"><a href="#ä¸‰ã€init-d" class="headerlink" title="ä¸‰ã€init.d"></a>ä¸‰ã€init.d</h1><blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://transformerswsz.github.io/2019/07/01/Linux%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/">Linux å¼€æœºè‡ªå¯åŠ¨</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.nowcoder.net/n/2b1853a33f2240e481dc7d15a44536f5">Linux è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</a></p>
<p><a target="_blank" rel="noopener" href="https://codeleading.com/article/15821729029/">linux æœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬ç¨‹åºï¼ˆå¯è®¾å®šå¯åŠ¨ä¼˜å…ˆçº§çš„é«˜çº§å¯åŠ¨æ–¹å¼ï¼‰</a></p>
</blockquote>
<ul>
<li><p>å…³äº init.d</p>
<ul>
<li>init.d ä¹Ÿç§°ä¸º SysV è„šæœ¬ï¼Œç”¨äºåœ¨ç³»ç»Ÿåˆå§‹åŒ–å’Œå…³é—­æœŸé—´å¯åŠ¨å’Œåœæ­¢æœåŠ¡ï¼ˆ/etc/init.d/ è„šæœ¬ä¹Ÿå¯ä»¥åœ¨å¯ç”¨ systemd çš„ç³»ç»Ÿä¸Šè¿è¡Œä»¥å®ç°å…¼å®¹æ€§ï¼‰</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥è„šæœ¬åœ¨å¯åŠ¨å’Œå…³é—­æœŸé—´æ‰§è¡Œ</li>
<li>è¯¥ init.d è„šæœ¬ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œè€Œåº”è¯¥æ”¯æŒå¯åŠ¨å’Œåœæ­¢ç­‰</li>
</ul>
</li>
<li><p>ï¼ˆç³»ç»Ÿç¯å¢ƒæ˜¯ Ubuntu 18.04)<code>/etc/rc#.d</code>ç›®å½•ä¸‹éƒ½æ˜¯åˆ° <code>/etc/init.d/</code> ç›®å½•çš„éƒ¨åˆ†è„šæœ¬çš„è½¯é“¾æ¥ã€‚æ¯ä¸ªè¿è¡Œçº§åˆ«è¦æ‰§è¡Œå“ªäº›æœåŠ¡å°±åœ¨ç›¸å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œæ¯”å¦‚è¿è¡Œçº§åˆ« 5 è¦å¯åŠ¨çš„æœåŠ¡å°±éƒ½æ”¾åœ¨ rc5.d ä¸‹ï¼Œä½†æ˜¯æ”¾åœ¨è¿™ä¸ª rc5.d ä¸‹çš„éƒ½æ˜¯ä¸€äº›è½¯é“¾æ¥æ–‡ä»¶ï¼Œé“¾æ¥åˆ° <code>/etc/init.d/</code> ä¸­ç›¸å¯¹åº”çš„æ–‡ä»¶ï¼ŒçœŸæ­£å¹²æ´»çš„æ˜¯ <code>/etc/init.d/</code> é‡Œçš„è„šæœ¬ï¼Œ#ä»£è¡¨ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–è¿è¡Œçº§åˆ«ï¼ŒèŒƒå›´ä¸º 0~6</p>
</li>
<li><p>è¿è¡Œçº§åˆ«</p>
<blockquote>
<p>0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º 0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</p>
<p>1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œroot æƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™†</p>
<p>2ï¼šå¤šç”¨æˆ·çŠ¶æ€ï¼ˆæ²¡æœ‰ NFS)</p>
<p>3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€ï¼ˆæœ‰ NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼</p>
<p>4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™</p>
<p>5ï¼šX11 æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢ GUI æ¨¡å¼</p>
<p>6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º 6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</p>
</blockquote>
</li>
<li><p>åœ¨è¿™äº›ç›®å½•ä¹‹ä¸‹ï¼ŒåŒ…å«äº†è®¸å¤šå¯¹è¿›ç¨‹è¿›è¡Œæ§åˆ¶çš„è„šæœ¬ã€‚è¿™äº›è„šæœ¬è¦ä¹ˆä»¥ <code>K##</code> å¼€å¤´ï¼Œè¦ä¹ˆä»¥ <code>S##</code> å¼€å¤´ï¼š</p>
<ul>
<li>Kï¼škillï¼Œç³»ç»Ÿå°†ç»ˆæ­¢å¯¹åº”çš„æœåŠ¡</li>
<li>Sï¼šstartï¼Œç³»ç»Ÿå°†å¯åŠ¨å¯¹åº”çš„æœåŠ¡</li>
<li><h2 id="ï¼šåŒä¸€è¿è¡Œçº§åˆ«ä¸‹è„šæœ¬æ‰§è¡Œçš„é¡ºåºï¼Œæ•°å€¼å°çš„å…ˆæ‰§è¡Œï¼Œæ•°å€¼å¤§çš„åæ‰§è¡Œã€‚å¾ˆå¤šæ—¶å€™è¿™äº›æ‰§è¡Œé¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯”å¦‚è¦å¯åŠ¨-Apache-æœåŠ¡ï¼Œå°±å¿…é¡»å…ˆé…ç½®ç½‘ç»œæ¥å£"><a href="#ï¼šåŒä¸€è¿è¡Œçº§åˆ«ä¸‹è„šæœ¬æ‰§è¡Œçš„é¡ºåºï¼Œæ•°å€¼å°çš„å…ˆæ‰§è¡Œï¼Œæ•°å€¼å¤§çš„åæ‰§è¡Œã€‚å¾ˆå¤šæ—¶å€™è¿™äº›æ‰§è¡Œé¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯”å¦‚è¦å¯åŠ¨-Apache-æœåŠ¡ï¼Œå°±å¿…é¡»å…ˆé…ç½®ç½‘ç»œæ¥å£" class="headerlink" title="ï¼šåŒä¸€è¿è¡Œçº§åˆ«ä¸‹è„šæœ¬æ‰§è¡Œçš„é¡ºåºï¼Œæ•°å€¼å°çš„å…ˆæ‰§è¡Œï¼Œæ•°å€¼å¤§çš„åæ‰§è¡Œã€‚å¾ˆå¤šæ—¶å€™è¿™äº›æ‰§è¡Œé¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯”å¦‚è¦å¯åŠ¨ Apache æœåŠ¡ï¼Œå°±å¿…é¡»å…ˆé…ç½®ç½‘ç»œæ¥å£"></a>ï¼šåŒä¸€è¿è¡Œçº§åˆ«ä¸‹è„šæœ¬æ‰§è¡Œçš„é¡ºåºï¼Œæ•°å€¼å°çš„å…ˆæ‰§è¡Œï¼Œæ•°å€¼å¤§çš„åæ‰§è¡Œã€‚å¾ˆå¤šæ—¶å€™è¿™äº›æ‰§è¡Œé¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯”å¦‚è¦å¯åŠ¨ Apache æœåŠ¡ï¼Œå°±å¿…é¡»å…ˆé…ç½®ç½‘ç»œæ¥å£</h2></li>
</ul>
</li>
<li><p>init.d æ–‡ä»¶å¤¹ä¸‹çš„è„šæœ¬æ–‡ä»¶ test æ ¼å¼å¦‚ä¸‹ï¼š</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">	start)</span><br><span class="line">		echo &quot;Starting myscript&quot;</span><br><span class="line">		# æ‰§è¡Œä½ çš„å¯åŠ¨ä»£ç </span><br><span class="line">		;;</span><br><span class="line">	stop)</span><br><span class="line">		echo &quot;Stopping myscript&quot;</span><br><span class="line">		# æ‰§è¡Œä½ çš„åœæ­¢ä»£ç </span><br><span class="line">		;;</span><br><span class="line">	*)</span><br><span class="line">		echo &quot;Usage: /etc/init.d/myscript &#123;start|stop&#125;&quot;</span><br><span class="line">		exit 1</span><br><span class="line">		;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<p>  åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œä½ éœ€è¦å°†<code>start</code>å’Œ<code>stop</code>å‡½æ•°ä¸­çš„ä»£ç æ›¿æ¢ä¸ºä½ è‡ªå·±çš„å¯åŠ¨å’Œåœæ­¢ä»£ç ã€‚åŒæ—¶ï¼Œç¡®ä¿ä¿®æ”¹è„šæœ¬æ–‡ä»¶æƒé™ï¼Œä½¿å…¶å¯æ‰§è¡Œ</p>
</li>
<li><p>åœ¨ Ubuntu/debain é‡Œï¼Œå¯ä»¥ä½¿ç”¨ update-rc.d å‘½ä»¤æ¥æŠŠç¤ºä¾‹è„šæœ¬å®‰è£…åˆ°å„ä¸ªè¿è¡Œç­‰çº§ä¸­ï¼ˆè¿™é‡Œéœ€è¦å°†å¯¹åº”è„šæœ¬æ–‡ä»¶æ”¾åˆ°<code>/etc/init.d</code>ç›®å½•ä¸‹ï¼‰</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo update-rc.d <span class="built_in">test</span> defaults 99</span><br></pre></td></tr></table></figure>
<p>  update-rc.d åé¢æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯/etc/init.d ä¸‹çš„è„šæœ¬åå­—ï¼Œé»˜è®¤å®‰è£…æ–¹å¼ï¼Œè¿è¡Œçš„ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§çš„æ•°å­—è¶Šå¤§ï¼Œè¡¨ç¤ºè¶Šè¿Ÿè¿è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠè‡ªå·±å†™çš„æœåŠ¡æ”¾åœ¨æœ€åè¿è¡Œ</p>
<p>  å¦‚æœä¸Šè¿°ä»£ç ä¸èƒ½ç”Ÿæ•ˆï¼Œå¾—æ‰‹åŠ¨åœ¨<code>/etc/rc#.d</code>(#è¡¨ç¤ºå¯¹åº”çš„è¿è¡Œç­‰çº§ï¼‰ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥ï¼ŒæŒ‡å‘<code>/etc/init.d</code>ç›®å½•ä¸‹å¯¹åº”çš„è„šæœ¬ï¼Œå‘½åæ ¼å¼æ˜¯ï¼šå¼€å¤´å¿…é¡»å¤§å†™ Sï¼ˆè¡¨ç¤ºå¯åŠ¨æœåŠ¡ï¼‰ï¼Œåé¢è·Ÿçš„æ•°å­— 99ï¼Œæ˜¯æˆ‘ä»¬è®¾å®šçš„å¯åŠ¨åºå·ï¼Œå³ä¼˜å…ˆçº§ï¼Œåé¢åå­—æ— é™å®š</p>
<p>  å¦‚æœè¦å¸è½½éšæœºå¯åŠ¨çš„æœåŠ¡ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯ï¼š</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo update-rc.d -f <span class="built_in">test</span> remove</span><br></pre></td></tr></table></figure>
<p>  ç°åœ¨ï¼Œå½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œè„šæœ¬å°†è‡ªåŠ¨æ‰§è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨<code>sudo service test start</code>æ¥æ‰‹åŠ¨å¯åŠ¨å®ƒï¼Œä½¿ç”¨<code>sudo service test stop</code>æ¥åœæ­¢å®ƒï¼Œä½¿ç”¨<code>sudo service test restart</code>æ¥é‡å¯å®ƒ</p>
</li>
</ul>
<h1 id="å››ã€systemd"><a href="#å››ã€systemd" class="headerlink" title="å››ã€systemd"></a>å››ã€systemd</h1><h2 id="4-1-ä½¿ç”¨-systemd-ç®¡ç†å¼€æœºè‡ªå¯è„šæœ¬"><a href="#4-1-ä½¿ç”¨-systemd-ç®¡ç†å¼€æœºè‡ªå¯è„šæœ¬" class="headerlink" title="4.1 ä½¿ç”¨ systemd ç®¡ç†å¼€æœºè‡ªå¯è„šæœ¬"></a>4.1 ä½¿ç”¨ systemd ç®¡ç†å¼€æœºè‡ªå¯è„šæœ¬</h2><blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Areas/p/13439000.html">Linux Ubuntu 20.04 â€”æ·»åŠ å¼€æœºå¯åŠ¨ï¼ˆæœåŠ¡/è„šæœ¬ï¼‰</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://cshihong.github.io/2018/10/15/Linux%E4%B8%8Bsystemctl%E5%91%BD%E4%BB%A4%E5%92%8Cservice%E3%80%81chkconfig%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8C%BA%E5%88%AB/">Linux ä¸‹ systemctl å‘½ä»¤å’Œ serviceã€chkconfig å‘½ä»¤çš„åŒºåˆ«</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038458363">Linux initã€serviceã€systemctl ä¸‰è€…åŒºåˆ«</a></p>
</li>
</ul>
<p>Systemctl æ˜¯ä¸€ä¸ª systemd å·¥å…·ï¼Œä¸»è¦è´Ÿè´£æ§åˆ¶ systemd ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ï¼Œsystemd å³ä¸º system daemon, æ˜¯ linux ä¸‹çš„ä¸€ç§ init è½¯ä»¶</p>
<p>Systemd æ˜¯ä¸€ä¸ªç³»ç»Ÿç®¡ç†å®ˆæŠ¤è¿›ç¨‹ã€å·¥å…·å’Œåº“çš„é›†åˆï¼Œç”¨äºå–ä»£ System V åˆå§‹è¿›ç¨‹ã€‚Systemd çš„åŠŸèƒ½æ˜¯ç”¨äºé›†ä¸­ç®¡ç†å’Œé…ç½®ç±» UNIX ç³»ç»Ÿ</p>
<p>åœ¨ Ubuntu 18.04 ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä½¿ç”¨ systemctl è®¾ç½®å¼€æœºè‡ªå¯åŠ¨è„šæœ¬ï¼š</p>
</blockquote>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>startup.sh</code>ï¼‰å¹¶ç¼–è¾‘å®ƒï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /path/to/startup.sh</span><br></pre></td></tr></table></figure>
<p> åœ¨è„šæœ¬æ–‡ä»¶ä¸­æ·»åŠ å¸Œæœ›åœ¨å¼€æœºæ—¶æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬</p>
</li>
<li><p>æ·»åŠ æ‰§è¡Œæƒé™ç»™è„šæœ¬æ–‡ä»¶ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">chmod</span> +x /path/to/startup.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºä¸€ä¸ª systemd æœåŠ¡å•å…ƒæ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>myservice.service</code>ï¼‰å¹¶ç¼–è¾‘å®ƒï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nano /etc/systemd/system/myservice.service</span><br></pre></td></tr></table></figure>
<p> åœ¨æœåŠ¡å•å…ƒæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/path/to/startup.sh</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=default.target</span><br></pre></td></tr></table></figure>
<p> ä¸¾ä¾‹(arpé™æ€ç»‘å®š):<br> <code>arpfixed.service</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=ARP_Fixed Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/home/project_public/arp_fixed.sh</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=default.target</span><br></pre></td></tr></table></figure>
<p> <code>/home/project_public/arp_fixed.sh</code>è„šæœ¬å†…å®¹ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">sleep</span> 120 <span class="comment"># å»¶æ—¶2min</span></span><br><span class="line"><span class="comment"># ç»‘å®šé™æ€arp</span></span><br><span class="line">arp -s 192.168.1.81 90:2b:34:ab:00:01</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿å­˜å¹¶å…³é—­æœåŠ¡å•å…ƒæ–‡ä»¶</p>
</li>
<li><p>å¯ç”¨æœåŠ¡ï¼ˆè®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼‰ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> myservice.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡æ–°åŠ è½½ systemd é…ç½®ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br></pre></td></tr></table></figure>
<p> åšå®Œä»¥ä¸Šæ­¥éª¤ï¼Œå½“é‡å¯ç³»ç»Ÿæ—¶ï¼Œ<code>startup.sh</code> è„šæœ¬å°†ä¼šè‡ªåŠ¨æ‰§è¡Œ</p>
<blockquote>
<ul>
<li>systemctl å¸¸ç”¨å‘½ä»¤</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl reboot	<span class="comment"># é‡å¯ç³»ç»Ÿ</span></span><br><span class="line">$ sudo systemctl rescue <span class="comment"># è¿›å…¥æ•‘æ´æ¨¡å¼ï¼ˆå•ç”¨æˆ·çŠ¶æ€ï¼‰</span></span><br><span class="line">$ sudo systemctl start nginx	<span class="comment"># å¼€å¯ nginx æœåŠ¡</span></span><br><span class="line">$ sudo systemctl restart nginx	<span class="comment"># é‡å¯</span></span><br><span class="line">$ sudo systemctl stop nginx		<span class="comment"># åœæ­¢</span></span><br><span class="line">$ sudo systemctl reload nginx	<span class="comment"># é‡æ–°åŠ è½½</span></span><br><span class="line">$ sudo systemctl status nginx	<span class="comment"># æŸ¥è¯¢çŠ¶æ€</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h2 id="4-2-æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—"><a href="#4-2-æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—" class="headerlink" title="4.2 æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—"></a>4.2 æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—</h2><blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/mikelv01/article/details/108201676?app_version=5.15.6&amp;csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22108201676%22%2C%22source%22%3A%22unlogin%22%7D&amp;utm_source=app">æŸ¥çœ‹ systemctl æˆ– service å¯åŠ¨æœåŠ¡æ—¥å¿—</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/leigepython/p/10302056.html">journalctl æ—¥å¿—æŸ¥çœ‹æ–¹æ³•</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sparkdev/p/8795141.html">linux journalctl å‘½ä»¤</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/105116548#:~:text=Linux%206%E7%A7%8D%E6%97%A5%E5%BF%97%E6%9F%A5%E7%9C%8B%E6%96%B9%E6%B3%95%EF%BC%8C%E4%B8%8D%E4%BC%9A%E7%9C%8B%E6%97%A5%E5%BF%97%E4%BC%9A%E8%A2%AB%E9%84%99%E8%A7%86%E7%9A%84%201%201%E3%80%81tail%20%E8%BF%99%E4%B8%AA%E6%98%AF%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%80%E7%A7%8D%E6%9F%A5%E7%9C%8B%E6%96%B9%E5%BC%8F%20%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F%3A%20tail%20%5B%E5%BF%85%E8%A6%81%E5%8F%82%E6%95%B0%5D,less%E5%91%BD%E4%BB%A4%E5%9C%A8%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%97%B6%EF%BC%8C%E4%B8%80%E8%88%AC%E6%B5%81%E7%A8%8B%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84%20...%207%20%E4%B8%80%E8%88%AC%E6%9C%AC%E4%BA%BA%E6%9F%A5%E6%97%A5%E5%BF%97%E9%85%8D%E5%90%88%E5%BA%94%E7%94%A8%E7%9A%84%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4%20...%208%20linux%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E%20">Linux 6 ç§æ—¥å¿—æŸ¥çœ‹æ–¹æ³•ï¼Œä¸ä¼šçœ‹æ—¥å¿—ä¼šè¢«é„™è§†çš„</a></p>
</li>
</ul>
<p><code>journalctl</code> ç”¨æ¥æŸ¥è¯¢<code>systemd-journald</code> æœåŠ¡æ”¶é›†åˆ°çš„æ—¥å¿—ã€‚<code>systemd-journald</code> æœåŠ¡æ˜¯ <code>systemd init</code> ç³»ç»Ÿæä¾›çš„æ”¶é›†ç³»ç»Ÿæ—¥å¿—çš„æœåŠ¡</p>
</blockquote>
<ul>
<li><code>journalctl</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ journalctl -u æœåŠ¡å</span><br></pre></td></tr></table></figure>
<ul>
<li>ç³»ç»Ÿæ—¥å¿—</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /var/log/message</span><br><span class="line">$ <span class="built_in">cat</span> /var/log/syslog</span><br></pre></td></tr></table></figure>
<ul>
<li><code>linux</code>å¸¸ç”¨æ—¥å¿—æ–‡ä»¶</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/var/log/message ç³»ç»Ÿå¯åŠ¨åçš„ä¿¡æ¯å’Œé”™è¯¯æ—¥å¿—ï¼Œæ˜¯ Red Hat Linux ä¸­æœ€å¸¸ç”¨çš„æ—¥å¿—ä¹‹ä¸€</span><br><span class="line">/var/log/syslog	ç³»ç»Ÿå¯åŠ¨æ—¥å¿—ï¼ŒUbuntu ç³»ç»Ÿ</span><br><span class="line">/var/log/secure ä¸å®‰å…¨ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯</span><br><span class="line">/var/log/maillog ä¸é‚®ä»¶ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯</span><br><span class="line">/var/log/cron ä¸å®šæ—¶ä»»åŠ¡ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯</span><br><span class="line">/var/log/spooler ä¸ UUCP å’Œ news è®¾å¤‡ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯</span><br><span class="line">/var/log/boot.log å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨å’Œåœæ­¢ç›¸å…³çš„æ—¥å¿—æ¶ˆæ¯</span><br><span class="line">/var/log/wtmp è¯¥æ—¥å¿—æ–‡ä»¶æ°¸ä¹…è®°å½•æ¯ä¸ªç”¨æˆ·ç™»å½•ã€æ³¨é”€åŠç³»ç»Ÿçš„å¯åŠ¨ã€åœæœºçš„äº‹ä»¶</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://example.com">thee</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/2023/06/20/linux%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC%E6%96%B9%E5%BC%8F/">http://example.com/2023/06/20/linux%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC%E6%96%B9%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://example.com" target="_blank">theeã®åšå®¢ ğŸ‰</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%87%AA%E5%90%AF%E5%8A%A8/">è‡ªå¯åŠ¨</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/e0a9f20fcdf2977dadef521f02b0465004cafee6.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/15/ZYNQ%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/022c23204ba7816e279cc352e332b74b6f656da2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ZYNQå­¦ä¹ ç¬”è®°</div></div></a></div><div class="next-post pull-right"><a href="/2023/07/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B9%8B%E9%9D%99%E6%80%81arp%E7%BB%91%E5%AE%9A/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/e0a9f20fcdf2977dadef521f02b0465004cafee6.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">è®¡ç®—æœºä¹‹é™æ€ arp ç»‘å®š</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#linux-%E7%B3%BB%E7%BB%9F%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C"><span class="toc-text">linux ç³»ç»Ÿå¼€æœºè‡ªå¯åŠ¨è„šæœ¬æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81crontab"><span class="toc-text">ä¸€ã€crontab</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81rc-local"><span class="toc-text">äºŒã€rc.local</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81init-d"><span class="toc-text">ä¸‰ã€init.d</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%EF%BC%9A%E5%90%8C%E4%B8%80%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB%E4%B8%8B%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E7%9A%84%E9%A1%BA%E5%BA%8F%EF%BC%8C%E6%95%B0%E5%80%BC%E5%B0%8F%E7%9A%84%E5%85%88%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%95%B0%E5%80%BC%E5%A4%A7%E7%9A%84%E5%90%8E%E6%89%A7%E8%A1%8C%E3%80%82%E5%BE%88%E5%A4%9A%E6%97%B6%E5%80%99%E8%BF%99%E4%BA%9B%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%E6%98%AF%E5%BE%88%E9%87%8D%E8%A6%81%E7%9A%84%EF%BC%8C%E6%AF%94%E5%A6%82%E8%A6%81%E5%90%AF%E5%8A%A8-Apache-%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%B0%B1%E5%BF%85%E9%A1%BB%E5%85%88%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3"><span class="toc-text">ï¼šåŒä¸€è¿è¡Œçº§åˆ«ä¸‹è„šæœ¬æ‰§è¡Œçš„é¡ºåºï¼Œæ•°å€¼å°çš„å…ˆæ‰§è¡Œï¼Œæ•°å€¼å¤§çš„åæ‰§è¡Œã€‚å¾ˆå¤šæ—¶å€™è¿™äº›æ‰§è¡Œé¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯”å¦‚è¦å¯åŠ¨ Apache æœåŠ¡ï¼Œå°±å¿…é¡»å…ˆé…ç½®ç½‘ç»œæ¥å£</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81systemd"><span class="toc-text">å››ã€systemd</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E4%BD%BF%E7%94%A8-systemd-%E7%AE%A1%E7%90%86%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC"><span class="toc-text">4.1 ä½¿ç”¨ systemd ç®¡ç†å¼€æœºè‡ªå¯è„šæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E6%97%A5%E5%BF%97"><span class="toc-text">4.2 æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/Thee24LYJ/Pic_Image/images/e0a9f20fcdf2977dadef521f02b0465004cafee6.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By thee</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="åšå®¢æ¡†æ¶ä¸ºHexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="ä¸»é¢˜é‡‡ç”¨butterfly"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="æœ¬ç«™é¡¹ç›®ç”±Gtihubæ‰˜ç®¡"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="/assets/js/cursor.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>